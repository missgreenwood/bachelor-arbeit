\chapter{Interpretation}\label{Kap4}

Das folgende Kapitel dient der Bewertung und Einordnung der ermittelten Ergebnisse: Performance f"ur HPLinpack und STREAM f"ur Messreihe 1 gegen"uber Messreihe 2 sowie Stromverbrauch in Messreihe 1 gegen"uber Messreihe 2. Dabei ist das Skalierungsverhalten des Bramble bez"uglich Performance und Stromverbrauch ausschlaggebend. Abschlie\ss end werden Grenzen des Versuchsaufbaus diskutiert.   

\section{HPLinpack: Performance}\label{Interpretation-Linpack}

% TODO: Interpretation HPL Messreihe 1 (Skalierungsverhalten!)

%Der Versuchsaufbau und die Steuerung der verteilten Ausf"uhrung der Benchmark-Programme durch MPICH lassen vermuten, dass sich kein signifikanter Unterschied in der Performance zeigt, je nachdem, ob nicht mehr an der Programmausf"uhrung beteiligte RPi-Knoten heruntergefahren werden oder nicht. Wie in Kap. \ref{Bramble-Versuchsaufbau} dargestellt, ist im Machinefile genau festgelegt, welchen CPUs bzw. RPi-Knoten mit mpiexec eine die Ausf"uhrung des Benchmark-Programms zugewiesen wird und in welcher Reihenfolge sie f"ur die Ausf"uhrung herangezogen werden.
%
%Die Diagramme \ref{fig:hpl5} und \ref{fig:hpl6} best"atigen diese Erwartung: Messreihe 1 und Messreihe 2 werden in den Grafiken nahezu identisch dargestellt. Tabelle \ref{fig:hpl-vgl} stellt die minimalen, maximalen und durchschnittlichen Werte f"ur Ausf"uhrungsrate und Ausf"uhrungsdauer beider Messreihen gegen"uber: 
%%TODO: Werte ermitteln und eintragen
%%\begin{figure}
%%  \centering
%%  \begin{tabular}{|l|c|c|}
%%    \hline 
%%     & \textbf{20 RPis angeschaltet} & \textbf{n+1 RPis angeschaltet}\\ 
%%    \hline 
%%    \textbf{Ausf"uhrungsrate/Min.} & GFLOPs & GFLOPs\\
%%    \hline 
%%    \textbf{Ausf"uhrungsrate/Max.} & GFLOPs & GFLOPs\\
%%    \hline 
%%    \textbf{Ausf"uhrungsrate/$\varnothing$} & GFLOPs & GFLOPs\\
%%    \hline 
%%    \textbf{Ausf"uhrungsdauer/Min.} &  s & s\\
%%    \hline 
%%    \textbf{Ausf"uhrungsdauer/Max.} &  s & s\\
%%	\hline 
%%    \textbf{Ausf"uhrungsdauer/$\varnothing$} & s & s\\
%%    \hline
%%  \end{tabular}
%%  \caption{Performance f"ur HPLinpack, Messreihe 1 und Messreihe 2.}\label{fig:hpl-vgl}
%%\end{figure}
%\noindent
%
%% TODO: genaue Werte!
%Dabei "uberschreiten die Differenzen in keinem Fall die Gr"o\ss enordnung von %z
%, liegen also innerhalb des Messfehlers (vgl. Kap. \ref{Ergebnisse-HPL}). Somit l"asst sich schlussfolgern, dass das Herunterfahren nicht mehr aktiver RPi-Knoten keine signifikanten Auswirkungen auf die Performance von HPLinpack auf dem Bramble hat. Das Skalierungsverhalten bez"uglich der Performance ist somit f"ur beide Messreihen gleich. 

\section{STREAM: Performance}\label{Interpretation-Stream}

Die Konzeption des STREAM-Benchmarks l"asst erwarten, dass das Hinzunehmen von Ressourcen, d.h. von RPi-Knoten, einen linearen Anstieg der Ausf"uhrungsrate zu Folge hat. Der Autor des Benchmarks schreibt hierzu: 
\begin{quote}
\onehalfspacing
[\dots] unless something is very wrong, the performance of a cluster will be the performance of a node times the number of nodes (vgl. \url{http://www.cs.virginia.edu/stream/ref.html}).
\end{quote}
F"ur die Ausf"uhrungsdauer auf jeder einzelnen CPU sollte hingegen ann"ahernd konstant bleiben, auch wenn Ressourcen hinzugenommen werden.

Diagramme \ref{fig:stream1} und \ref{fig:stream2} zeigen genau dieses Verhalten f"ur die parallele Ausf"uhrung von STREAM auf $n\leq 17$ RPi-Knoten: Der Anstieg der  Ausf"uhrungsrate bei Hinzunahme von RPi-Knoten ist nahezu linear. Geringe Abweichungen zeigen sich bei der Ausf"uhrungsdauer. Diese wird in Mikrosekunden gemessen. % TODO ErklÃ¤rung

Das Skalierungsverhalten des Bramble bei der parallelen Ausf"uhrung von STREAM auf $n\leq 17$ RPi-Knoten kann somit als erwartungsgem"a\ss\ bezeichnet werden. 

Somit steht zu erwarten, dass auch das Herunterfahren nicht mehr aktiver RPi-Knoten keinen signifikanten Effekt auf Performance und Ausf"uhrungsdauer der anderen RPi-Knoten bei der Ausf"uhrung von STREAM hat. Die Diagramme \ref{fig:stream5} und \ref{fig:stream6} best"atigen das f"ur $n\leq 17$ RPi-Knoten: Die Ausf"uhrungsrate ist in Messreihe 2 nahezu identisch mit der Ausf"uhrungsrate in Messreihe 1. Bei der durchschnittlichen Ausf"uhrungsdauer von Messreihe 1 gegen"uber Messreihe 2 zeigen sich, wie schon innerhalb von Messreihe 1, leichte Unterschiede. Hier liegt die Abweichung von Messreihe 2 gegen"uber Messreihe 1 bei maximal %z 
Sekunden. 

Das Skalierungsverhalten des Bramble kann somit auch in Messreihe 2 mit $n\leq 17$ RPi-Knoten als erwartungsgem"a\ss\ gelten.  

F"ur $n > 18$ RPi-Knoten zeigt sich bei Ausf"uhrungsrate und Ausf"uhrungsdauer ein abweichendes Skalierungsverhalten. Tabelle \ref{fig:stream-abweichung} stellt erwartete und erzielte Messwerte f"ur Messreihe 1 gegen"uber. Abweichungen von mehr als 1 MB/s (Performance) und 0.01 s (Ausf"uhrungsdauer) gegen"uber den erwarteten Messwerten sind darin rot markiert. Die erwarteten Messwerte werden werden wie folgt angenommen: 
\[\text{Erwartete Performance} = \frac{\text{Performance f"ur }n=17}{17}\ast n\] 
\[\text{Erwartete Ausf"uhrungsdauer = Mittelwert der Ausf"uhrungsdauer f"ur }n\leq 17\]
\begin{figure}
  \centering
  \begin{tabular}{|l|c|c|c|}
    \hline 
    \textbf{Aktive RPi-Knoten:} & \textbf{17} & \textbf{18} & \textbf{19}\\ 
    \hline 
    \textbf{Copy in MB/s (erwartet):} & 4556.4 & 4824.4 & 5092.5\\
    \hline 
    \textbf{Copy in MB/s (erzielt):} & 4556.4 & \textcolor{red}{3451.6} & \textcolor{red}{3642.9}\\
    \hline 
    \textbf{Copy in s (erwartet):} & 0.118791 & 0.118791 & 0.118791\\
    \hline 
    \textbf{Copy in s (erzielt):} & 0.119821 & \textcolor{red}{0.168030} & \textcolor{red}{0.167579}\\
    \hline 
    \textbf{Scale in MB/s (erwartet):} & 3497.7 & 3703.5 & 3909.1\\
    \hline 
    \textbf{Scale in MB/s (erzielt):} & 3497.7 & \textcolor{red}{3236.2} & \textcolor{red}{3421.8}\\
    \hline 
	\textbf{Scale in s (erwartet):} & 0.156077 & 0.156077 & 0.156077\\
    \hline 
    \textbf{Scale in s (erzielt):} & 0.158162 & \textcolor{red}{0.179140} & \textcolor{red}{0.178560}\\
    \hline 
    \textbf{Add in MB/s (erwartet):} & 1672.5 & 4978.6 & 5255.2\\
    \hline 
    \textbf{Add in MB/s (erzielt):} & 1672.5 & \textcolor{red}{4501.4} & \textcolor{red}{4765.8}\\
    \hline 
    \textbf{Add in s (erwartet):} & 0.173474 & 0.173474 & 0.173474\\
    \hline 
    \textbf{Add in s (erzielt):} & 0.174494 & \textcolor{red}{0.192586} & \textcolor{red}{0.192147}\\
    \hline 
    \textbf{Triad in MB/s (erwartet):} & 4557.4 & 4852.5 & 4093.6\\
    \hline 
    \textbf{Triad in MB/s (erzielt):} & 4557.4 & \textcolor{red}{4377.4} & \textcolor{red}{4632.1}\\
    \hline 
    \textbf{Triad in s (erwartet):} & 0.179196 & 0.179196 & 0.179196\\
    \hline 
    \textbf{Triad in s (erzielt):} & 0.179882 & \textcolor{red}{0.198159} & \textcolor{red}{0.197686}\\
    \hline 
  \end{tabular}
  \caption{Erwartete und erzielte Messwerte f"ur STREAM auf $n\geq 17$ RPi-Knoten.}\label{fig:stream-abweichung}
\end{figure}
\noindent

  

\section{Stromverbrauch}

% \section{Green 500}
% Seit einigen Jahren zeigt sich auch in der HPC-Welt ein zunehmendes Problembewusstsein betreffend den Energieverbrauch und -effizienz der verwendeten und untersuchten Systeme. Daraus resultiert das Green500-Ranking, das seit dem Jahr 2006 die Kandidaten der TOP500-Liste unter dem Aspekt der Energieeffizienz untersucht. Die Bestenliste liefert die Supercomputer mit dem besten Verh"altnis zwischen Leistung und Stromverbrauch (FLOPS pro Watt)\footnote{Vgl. \url{http://www.green500.org/}.}.
% Quelle: \url{http://www.green500.org/docs/pubs/RunRules_Ver1.0.pdf}

\section{Grenzen des Versuchsaufbaus}\label{Grenzen}

W"ahrend der Versuchsdurchf"uhrung zeigte sich, dass die jetzige Architektur des Bramble in einigen Punkten an ihre Grenzen st"o\ss t. Bevor die Benchmarks bzw. die ExperimentSuites ausgef"uhrt werden konnten, mussten einige Fehlerf"alle untersucht und behoben werden: 
\begin{enumerate}\bfseries
	\item Defekte Hardware.\\
\normalfont
Einige Mini-USB-Kabel waren bereits zu Beginn defekt. Sie mussten durch funktionsf"ahige Kabel ersetzt werden. 
	\textbf{\item RPi-Knoten nicht erreichbar (\texttt{ping}).}\\
H"aufig reagierte ein einzelner RPi-Knoten nicht auf ein \texttt{ping} von einem anderen RPi-Knoten oder von \texttt{careme} aus (Fehlermeldung: \texttt{Destination Host Unreachable}), obwohl die Status-LED Netzwerkaktivit"at anzeigte. Als einzige L"osung erwies sich Ziehen und wieder Einstecken des Mini-USB-Kabels; war das nicht erfolgreich, musste der Vorgang mit dem Netzwerkkabel wiederholt werden (das Netzwerkkabel alleine reicht nicht aus). Nach einigen Minuten war der Zielknoten i.d.R. wieder mit \texttt{ping} erreichbar. 
	\textbf{\item RPi-Knoten nicht erreichbar (\texttt{ssh}).}\\ 
Hier traten drei Fehlerf"alle auf: Am h"aufigsten war die Fehlermeldung \texttt{No route to host} beim Versuch, von \texttt{careme} oder einem anderen RPi-Knoten aus eine SSH-Verbindung aufzubauen. Auch hier musste das Netzwerkkabel gezogen und wieder eingesteckt werden. Nach einigen Minuten war der Zielknoten i.d.R. wieder "uber \texttt{ssh} erreichbar. 

Ein weiterer Fehlerfall war ein "uberraschender Passwortprompt f"ur \texttt{root} beim Versuch, eine SSH-Verbindung von einem RPi-Knoten aus zu einem anderen aufzubauen. Dieses Problem lie\ss\ sich durch Eintragen des RSA Public Key von \texttt{root} in die Datei \texttt{\textasciitilde/.ssh/authorized\_keys} auf dem Zielknoten l"osen. 

Seltener trat die Fehlermeldung \texttt{WARNING: REMOTE HOST IDENTIFICATION HAS CHAN\-GED!} auf. In diesem Fall musste der RSA Public Key des anfragenden RPi-Knotens in der Datei \texttt{\textasciitilde/.ssh/known\_hosts} auf dem Zielknoten korrigiert werden. 
	\textbf{\item Geteiltes Verzeichnis nicht eingeh"angt.}\\ 
Beim Neustart eines RPi-Knotens wurde h"aufig das geteilte Verzeichnis nicht eingeh"angt (Fehlermeldung z.B. \texttt{-bash: /srv/libraries/etc/.sharedprofile: No such file or directory}). Dann musste das Verzeichnis mit \texttt{mount /srv} auf dem betreffenden RPi-Knoten eingeh"angt werden. 
	\textbf{\item Bash-Befehle werden nicht erkannt.} 
Gelegentlich wurden auf einzelnen RPi-Knoten h"aufig verwendete Bash-Befehle nicht mehr erkannt (Fehlermeldung z.B. \texttt{mpiexec: command not found}). Als L"osung erwies sich ein Logout und erneuter Login auf dem betreffenden RPi-Knoten. 
\end{enumerate}
\noindent 
Der Ausschluss dieser Fehlerf"alle wurde weitestgehend in die Vorbereitung einer ExperimentSuite integriert: "Uberpr"ufung der Netzverbindung aller RPi-Knoten mit \texttt{ping} vom Berechnungsknoten \texttt{pi03} aus, Einh"angen des geteilten Verzeichnisses und damit gleichzeitig die  "Uberpr"ufung der SSH-Verbindung zu allen RPi-Knoten (vgl. Kap. \ref{Bramble-Versuchsaufbau}). 

Spontan auftretende Fehler konnten nicht im Vorfeld ausgeschlossen werden. Die Durchf"uhrung einer ExperimentSuite erforderte daher immer die Anwesenheit einer Aufsichtsperson, um z.B. Kabel und Status-LEDs der RPi-Knoten zu "uberpr"ufen. Trat ein spontaner Fehler auf, musste die Durchf"uhrung der ExperimentSuite abgebrochen und von Neuem mit den Vorbereitungen und der Durchf"uhrung begonnen werden musste. Auch das Trennen nicht mehr aktiver RPi-Knoten vom Stromnetz musste manuell durch eine Aufsichtsperson erfolgen. Auch jeder Neustart eines RPi-Knoten musste von Hand veranlasst werden, da ein RPi nur durch Ziehen und erneutes Einstecken des Mini-USB-Kabels zum Hochfahren veranlasst werden kann. 

Die physische Architektur des Bramble erwies sich in Teilen als Hindernis. Der Aufbau ist so beengt, dass die st"andig ben"otigten Ethernet- und Mini-USB-Anschl"usse der RPi-Knoten \texttt{pi11} -- \texttt{pi20} nur schwer zug"anglich sind. Zudem sind manche Mini-USB-Kabel so kurz abgemessen, dass sie kaum bis zum entsprechenden Knoten reichen. Ein h"aufiges Trennen und wieder Einstecken von Mini-USB- und Netzwerkkabel, wie z.B. in den ExperimentSuites zum Messen des Stromverbrauchs einmal pro RPi-Knoten und Benchmark vorgesehen, wird dadurch erschwert. 

Die vorliegenden Messergebnisse wurden durch diese Gegebenheiten nicht beeinflusst, da bei St"orungen die ExperimentSuite abgebrochen und der Versuch von Neuem begonnen wurde. F"ur zuk"unftige Versuchsaufbauten erscheint eine entsprechende Anpassung der Cluster-Architektur sinnvoll (vgl. Kap. \ref{Kap5}).
\endinput 